[package]
name = "nexus-vfs"
version = "0.1.0"
edition = "2021"
license = "Apache-2.0"
authors = ["Open Nexus OS Contributors"]

[features]
# Host-first default: enable the Cap'n Proto IDL backend so the crate compiles and is lintable
# standalone under `nexus_env="host"`.
default = ["idl-capnp"]
# Host backend uses Cap'n Proto IDL frames over the loopback transport.
idl-capnp = ["dep:capnp", "dep:nexus-idl-runtime", "nexus-idl-runtime/capnp", "nexus-ipc/std"]
# OS backend uses raw bring-up frames over kernel IPC v1 (OPCODE_* protocol implemented by vfsd os-lite).
os-kernel = ["nexus-ipc/os-lite", "nexus-ipc/kernel-ipc"]

[dependencies]
nexus-ipc = { path = "../nexus-ipc", default-features = false }
nexus-idl-runtime = { path = "../nexus-idl-runtime", optional = true }
capnp = { version = "0.24", optional = true }
